import{a as W}from"./chunk-WQXHFZ5A.js";import{a as J,b as w,c as k,d as K,e as z,f as $}from"./chunk-6S6RWZMQ.js";import{a as M,b as D,c as N,d as H,e as R,f as G,i as U}from"./chunk-XDHIIILT.js";import{n as B}from"./chunk-GN54V6VU.js";import{Ab as L,Z as m,a as g,ab as q,b as A,bb as F,c as I,ca as x,cb as j,da as C,g as v,ha as P,p as S,rb as Q}from"./chunk-MF5MGSS4.js";var nt=(()=>{let e=class e{constructor(r,o){this.userService=r,this.router=o}canActivate(){return I(this,null,function*(){let r=yield this.userService.onMe();return console.log("Result",r),r.errors||r.data==null?(console.log("Apollo errors",r.error?.graphQLErrors),console.log("Network errors",r.error?.networkError),this.router.navigate(["/auth/login"]),!1):!0})}};e.\u0275fac=function(o){return new(o||e)(x(W),x(G))},e.\u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Z=(t,e)=>I(void 0,null,function*(){return yield C(nt).canActivate()});var V=[{path:"onboarding",loadChildren:()=>import("./chunk-T7SQYTJ5.js").then(t=>t.OnboardingModule)},{path:"auth",loadChildren:()=>import("./chunk-PIMF4GDY.js").then(t=>t.AuthModule)},{path:"dashboard",loadChildren:()=>import("./chunk-ULPAKTDM.js").then(t=>t.DashboardModule),canActivate:[Z]},{path:"",redirectTo:"onboarding",pathMatch:"full"}];var it=(t,e,n)=>{let r=["POST","PUT","PATCH"].indexOf(t.method.toUpperCase())!==-1,o=i=>["variables","extensions"].indexOf(i.toLowerCase())!==-1,s=t.body.length,a=t.options&&t.options.useMultipart,l;if(a){if(s)return new v(i=>i.error(new Error("File upload is not available when combined with Batching")));if(!r)return new v(i=>i.error(new Error("File upload is not available when GET is used")));if(!n)return new v(i=>i.error(new Error(`To use File upload you need to pass "extractFiles" function from "extract-files" library to HttpLink's options`)));l=n(t.body),a=!!l.files.size}let u={};if(s){if(!r)return new v(i=>i.error(new Error("Batching is not available for GET requests")));u={body:t.body}}else{let i=a?l.clone:t.body;r?u={body:i}:u={params:Object.keys(t.body).reduce((h,c)=>{let d=t.body[c];return h[c]=o(c)?JSON.stringify(d):d,h},{})}}if(a&&r){let i=new FormData;i.append("operations",JSON.stringify(u.body));let y={},h=l.files,c=0;h.forEach(d=>{y[++c]=d}),i.append("map",JSON.stringify(y)),c=0,h.forEach((d,p)=>{i.append(++c+"",p,p.name)}),u.body=i}return e.request(t.method,t.url,g(g({observe:"response",responseType:"json",reportProgress:!1},u),t.options))},st=(t,e)=>t&&e?e.keys().reduce((r,o)=>r.set(o,e.getAll(o)),t):e||t;function at(...t){return t.find(e=>typeof e<"u")}function ct(t){let e=t.headers&&t.headers instanceof M?t.headers:new M(t.headers);if(t.clientAwareness){let{name:n,version:r}=t.clientAwareness;n&&!e.has("apollographql-client-name")&&(e=e.set("apollographql-client-name",n)),r&&!e.has("apollographql-client-version")&&(e=e.set("apollographql-client-version",r))}return e}var lt={batchInterval:10,batchMax:10,uri:"graphql",method:"POST",withCredentials:!1,includeQuery:!0,includeExtensions:!1,useMultipart:!1};function b(t,e,n){return at(t[n],e[n],lt[n])}var E=class extends k{httpClient;options;requester;print=J;constructor(e,n){super(),this.httpClient=e,this.options=n,this.options.operationPrinter&&(this.print=this.options.operationPrinter),this.requester=r=>new w(o=>{let s=r.getContext(),a=b(s,this.options,"method"),l=b(s,this.options,"includeQuery"),u=b(s,this.options,"includeExtensions"),i=b(s,this.options,"uri"),y=b(s,this.options,"withCredentials"),h=b(s,this.options,"useMultipart"),c=this.options.useGETForQueries===!0,d=r.query.definitions.some(f=>f.kind==="OperationDefinition"&&f.operation==="query");c&&d&&(a="GET");let p={method:a,url:typeof i=="function"?i(r):i,body:{operationName:r.operationName,variables:r.variables},options:{withCredentials:y,useMultipart:h,headers:this.options.headers}};u&&(p.body.extensions=r.extensions),l&&(p.body.query=this.print(r.query));let ot=ct(s);p.options.headers=st(p.options.headers,ot);let T=it(p,this.httpClient,this.options.extractFiles).subscribe({next:f=>{r.setContext({response:f}),o.next(f.body)},error:f=>o.error(f),complete:()=>o.complete()});return()=>{T.closed||T.unsubscribe()}})}request(e){return this.requester(e)}},X=(()=>{class t{httpClient;constructor(n){this.httpClient=n}create(n){return new E(this.httpClient,n)}static \u0275fac=function(r){return new(r||t)(x(D))};static \u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Y(t){return new k(function(e,n){var r=S(e,[]);return new w(function(o){var s,a=!1;return Promise.resolve(r).then(function(l){return t(l,e.getContext())}).then(e.setContext).then(function(){a||(s=n(e).subscribe({next:o.next.bind(o),error:o.error.bind(o),complete:o.complete.bind(o)}))}).catch(o.error.bind(o)),function(){a=!0,s&&s.unsubscribe()}})})}var _=(()=>{let e=class e{getToken(){return localStorage.getItem("token")}saveToken(r){localStorage.setItem("token",r)}removeTokens(){localStorage.removeItem("token"),localStorage.removeItem("refreshToken")}getRefreshToken(){return localStorage.getItem("refreshToken")}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ut="http://localhost:8080/query";function pt(t){let e=C(X);return{link:Y((r,{headers:o})=>{let s=t.getToken();return{headers:A(g({},o),{Authorization:s?`Bearer ${s}`:""})}}).concat(e.create({uri:ut})),cache:new K,defaultOptions:{watchQuery:{fetchPolicy:"no-cache",errorPolicy:"ignore"},query:{fetchPolicy:"no-cache",errorPolicy:"ignore"}}}}var tt=[$,{provide:z,useFactory:t=>pt(t),deps:[_]}];var et={providers:[L({eventCoalescing:!0}),U(V),N(),tt]};var rt=(()=>{let e=class e{constructor(){this.title="sy-fe"}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=P({type:e,selectors:[["app-root"]],standalone:!0,features:[Q],decls:3,vars:0,consts:[[1,"h-100"],[1,"content"]],template:function(o,s){o&1&&(q(0,"main",0)(1,"div",1),j(2,"router-outlet"),F()())},dependencies:[B,R]});let t=e;return t})();H(rt,et).catch(t=>console.error(t));
